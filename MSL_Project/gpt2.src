; TASKING C166/ST10 C compiler v8.7r1 Build 775
; options: -e -Id:\programme\tasking\c166 v8.7r1\include -x2 -Bhoeufmknladij -OB
;          -OE -zswitch_tabmem_default -zautobitastruct-4 -zautobita-0 -FSC -A1
;          -zvolatile_union -O0 -g -newerr -s -i0 -Ms
$DEBUG
$NOLOCALS
$EXTEND2
$NOMOD166
$STDNAMES(regsuper10bo.def)
$EXTMAC
$CASE
$NOEXPANDREGBANK
$MODEL(SMALL)
	NAME	GPT2_C
	?SYMB	'gpt2.c',32,80,16
	?SYMB	'',1,82,0
	?SYMB	'80166',0,84,0
	?SYMB	'',0,81,0
	?SYMB	'void',00H,45,1
	?SYMB	'char',080000H,45,2
	?SYMB	'unsigned char',080000H,45,3
	?SYMB	'short',0100000H,45,4
	?SYMB	'unsigned short',0100000H,45,5
	?SYMB	'long',0200000H,45,6
	?SYMB	'unsigned long',0200000H,45,7
	?SYMB	'float',0200000H,45,10
	?SYMB	'double',0400000H,45,11
	?SYMB	'int',0100000H,45,16
	?SYMB	'unsigned int',0100000H,45,18
	?SYMB	'bit',010000H,7,256
	?SYMB	'gpt2.c',0,29,1
	?SYMB	'',0,86,1
; gpt2.c      1	//****************************************************************************
; gpt2.c      2	// @Module        General Purpose Timer Unit (GPT2)
; gpt2.c      3	// @Filename      GPT2.C
; gpt2.c      4	// @Project       DAvE_config.dav
; gpt2.c      5	//----------------------------------------------------------------------------
; gpt2.c      6	// @Controller    Infineon XE167F-96F66
; gpt2.c      7	//
; gpt2.c      8	// @Compiler      Tasking Classic
; gpt2.c      9	//
; gpt2.c     10	// @Codegenerator 2.2
; gpt2.c     11	//
; gpt2.c     12	// @Description   This file contains functions that use the GPT2 module.
; gpt2.c     13	//
; gpt2.c     14	//----------------------------------------------------------------------------
; gpt2.c     15	// @Date          24.09.2021 15:34:16
; gpt2.c     16	//
; gpt2.c     17	//****************************************************************************
; gpt2.c     18	
; gpt2.c     19	// USER CODE BEGIN (GPT2_General,1)
; gpt2.c     20	
; gpt2.c     21	// USER CODE END
; gpt2.c     22	
; gpt2.c     23	
; gpt2.c     24	
; gpt2.c     25	//****************************************************************************
; gpt2.c     26	// @Project Includes
; gpt2.c     27	//****************************************************************************
; gpt2.c     28	
; gpt2.c     29	#include "MAIN.H"
	?SYMB	'MAIN.H',0,29,2
	?SYMB	'',0,86,2
	?SYMB	'XE16xREGS.H',0,29,3
	?SYMB	'',0,86,3
	?SYMB	'',0,86,2
	?SYMB	'SCS.H',0,29,3
	?SYMB	'',0,86,3
	?SYMB	'T$2',0,14,257
	?SYMB	'SCS_EXTCLK_F_SYS',0,33,257
	?SYMB	'SCS_EXTCLK_F_OUT',1,33,257
	?SYMB	'SCS_EXTCLK_F_PLL',2,33,257
	?SYMB	'SCS_EXTCLK_F_OSC',3,33,257
	?SYMB	'SCS_EXTCLK_F_WU',4,33,257
	?SYMB	'SCS_EXTCLK_F_TCK',5,33,257
	?SYMB	'SCS_EXTCLK_F_OSC_FL',6,33,257
	?SYMB	'SCS_EXTCLK_F_RTC',8,33,257
	?SYMB	'',16,16,0
	?SYMB	'SCS_EXTCLK_Type',257,13,258
	?SYMB	'',0,86,2
	?SYMB	'IO.H',0,29,3
	?SYMB	'',0,86,3
	?SYMB	'',0,86,2
	?SYMB	'GPT1.H',0,29,3
	?SYMB	'',0,86,3
	?SYMB	'',0,86,2
	?SYMB	'GPT2.H',0,29,3
	?SYMB	'',0,86,3
	?SYMB	'',0,86,2
	?SYMB	'CC2.H',0,29,3
	?SYMB	'',0,86,3
	?SYMB	'',0,86,2
	?SYMB	'CCU62.H',0,29,3
	?SYMB	'',0,86,3
	?SYMB	'',0,86,2
	?SYMB	'CCU63.H',0,29,3
	?SYMB	'',0,86,3
	?SYMB	'',0,86,2
	?SYMB	'',0,86,1
; gpt2.c     30	
; gpt2.c     31	// USER CODE BEGIN (GPT2_General,2)
; gpt2.c     32	
; gpt2.c     33	// USER CODE END
; gpt2.c     34	
; gpt2.c     35	
; gpt2.c     36	//****************************************************************************
; gpt2.c     37	// @Macros
; gpt2.c     38	//****************************************************************************
; gpt2.c     39	
; gpt2.c     40	// USER CODE BEGIN (GPT2_General,3)
; gpt2.c     41	
; gpt2.c     42	// USER CODE END
; gpt2.c     43	
; gpt2.c     44	
; gpt2.c     45	//****************************************************************************
; gpt2.c     46	// @Defines
; gpt2.c     47	//****************************************************************************
; gpt2.c     48	
; gpt2.c     49	// USER CODE BEGIN (GPT2_General,4)
; gpt2.c     50	
; gpt2.c     51	// USER CODE END
; gpt2.c     52	
; gpt2.c     53	
; gpt2.c     54	//****************************************************************************
; gpt2.c     55	// @Typedefs
; gpt2.c     56	//****************************************************************************
; gpt2.c     57	
; gpt2.c     58	// USER CODE BEGIN (GPT2_General,5)
; gpt2.c     59	
; gpt2.c     60	// USER CODE END
; gpt2.c     61	
; gpt2.c     62	
; gpt2.c     63	//****************************************************************************
; gpt2.c     64	// @Imported Global Variables
; gpt2.c     65	//****************************************************************************
; gpt2.c     66	
; gpt2.c     67	// USER CODE BEGIN (GPT2_General,6)
; gpt2.c     68		extern const unsigned int ARRAY_SIZE;
; gpt2.c     69		extern	unsigned int index;
; gpt2.c     70	// USER CODE END
; gpt2.c     71	
; gpt2.c     72	
; gpt2.c     73	//****************************************************************************
; gpt2.c     74	// @Global Variables
; gpt2.c     75	//****************************************************************************
; gpt2.c     76	
; gpt2.c     77	// USER CODE BEGIN (GPT2_General,7)
; gpt2.c     78	
; gpt2.c     79	// USER CODE END
; gpt2.c     80	
; gpt2.c     81	
; gpt2.c     82	//****************************************************************************
; gpt2.c     83	// @External Prototypes
; gpt2.c     84	//****************************************************************************
; gpt2.c     85	
; gpt2.c     86	// USER CODE BEGIN (GPT2_General,8)
; gpt2.c     87	
; gpt2.c     88	// USER CODE END
; gpt2.c     89	
; gpt2.c     90	
; gpt2.c     91	
; gpt2.c     92	//****************************************************************************
; gpt2.c     93	// @Prototypes Of Local Functions
; gpt2.c     94	//****************************************************************************
; gpt2.c     95	
; gpt2.c     96	// USER CODE BEGIN (GPT2_General,9)
; gpt2.c     97	
; gpt2.c     98	// USER CODE END
; gpt2.c     99	
; gpt2.c    100	
; gpt2.c    101	//****************************************************************************
; gpt2.c    102	// @Function      void GPT2_vInit(void) 
; gpt2.c    103	//
; gpt2.c    104	//----------------------------------------------------------------------------
; gpt2.c    105	// @Description   This is the initialization function of the GPT2 function 
; gpt2.c    106	//                library. It is assumed that the SFRs used by this library 
; gpt2.c    107	//                are in reset state. 
; gpt2.c    108	//
; gpt2.c    109	//----------------------------------------------------------------------------
; gpt2.c    110	// @Returnvalue   None
; gpt2.c    111	//
; gpt2.c    112	//----------------------------------------------------------------------------
; gpt2.c    113	// @Parameters    None
; gpt2.c    114	//
; gpt2.c    115	//----------------------------------------------------------------------------
; gpt2.c    116	// @Date          24.09.2021
; gpt2.c    117	//
; gpt2.c    118	//****************************************************************************
; gpt2.c    119	
; gpt2.c    120	// USER CODE BEGIN (Init,1)
; gpt2.c    121	
; gpt2.c    122	// USER CODE END
; gpt2.c    123	
; gpt2.c    124	void GPT2_vInit(void)
; gpt2.c    125	{
GPT2_1_PR	SECTION	CODE WORD PUBLIC 'CPROGRAM'
	?LINE	125
	PUBLIC	_GPT2_vInit
	?SYMB	'GPT2_vInit',_GPT2_vInit,37,1
	?SYMB	'',125,8,34
	?SYMB	'uword',18,13,260
_GPT2_vInit	PROC	FAR
	?SYMB	'',00H,95,0
; Locals:
; 
; Statics:
; 
; CSEs:
; 
; gpt2.c    126	
; gpt2.c    127	  // USER CODE BEGIN (Init,2)
; gpt2.c    128	
; gpt2.c    129	  // USER CODE END
; gpt2.c    130	  ///  -----------------------------------------------------------------------
; gpt2.c    131	  ///  Configuration of Timer Block Prescaler 1:
; gpt2.c    132	  ///  -----------------------------------------------------------------------
; gpt2.c    133	  GPT12E_KSCCFG  =  0x0003;      // Module Enable
	?LINE	133
	MOV	R12,#03h
	MOV	0FE1Ch,R12
; gpt2.c    134	
; gpt2.c    135	
; gpt2.c    136	  _nop();  // one cycle delay 
	?LINE	136
	NOP
; gpt2.c    137	
; gpt2.c    138	  _nop();  // one cycle delay 
	?LINE	138
	NOP
; gpt2.c    139	
; gpt2.c    140	
; gpt2.c    141	  ///  -----------------------------------------------------------------------
; gpt2.c    142	  ///  Configuration of Timer Block Prescaler 2:
; gpt2.c    143	  ///  -----------------------------------------------------------------------
; gpt2.c    144	  ///  - prescaler for timer block 2 is 2
; gpt2.c    145	
; gpt2.c    146	
; gpt2.c    147	  ///  -----------------------------------------------------------------------
; gpt2.c    148	  ///  Configuration of the GPT2 Core Timer 5:
; gpt2.c    149	  ///  -----------------------------------------------------------------------
; gpt2.c    150	  ///  - timer 5 works in timer mode
; gpt2.c    151	  ///  - prescaler factor is 2
; gpt2.c    152	  ///  - up/down control bit is reset
; gpt2.c    153	  ///  - external up/down control is disabled
; gpt2.c    154	  ///  - timer 5 run bit is reset
; gpt2.c    155	  ///  - timer 5 remote control is disabled
; gpt2.c    156	
; gpt2.c    157	  GPT12E_T5CON   =  0x0000;      // load timer 5 control register
	?LINE	157
	MOV	R12,#00h
	MOV	0FF46h,R12
; gpt2.c    158	  GPT12E_T5      =  0xFFFF;      // load timer 5 register
	?LINE	158
	MOV	R12,#0FFFFh
	MOV	0FE46h,R12
; gpt2.c    159	
; gpt2.c    160	  ///  -----------------------------------------------------------------------
; gpt2.c    161	  ///  Configuration of the GPT2 Core Timer 6:
; gpt2.c    162	  ///  -----------------------------------------------------------------------
; gpt2.c    163	  ///  - timer 6 works in timer mode
; gpt2.c    164	  ///  - prescaler factor is 2
; gpt2.c    165	  ///  - up/down control bit is reset
; gpt2.c    166	  ///  - external up/down control is disabled
; gpt2.c    167	  ///  - alternate output function T6OUT (P6.2) is disabled
; gpt2.c    168	  ///  - alternate output function T6OUT (P7.0) is disabled
; gpt2.c    169	  ///  - timer 6 output toggle latch (T6OTL) is set to 0
; gpt2.c    170	  ///  - timer 6 run bit is reset
; gpt2.c    171	  ///  - timer 6 is not cleared on a capture
; gpt2.c    172	
; gpt2.c    173	  GPT12E_T6CON   =  0x0800;      // load timer 6 control register
	?LINE	173
	MOV	R12,#0800h
	MOV	0FF48h,R12
; gpt2.c    174	  GPT12E_T6      =  0xE3C1;      // load timer 6 register
	?LINE	174
	MOV	R12,#0E3C1h
	MOV	0FE48h,R12
; gpt2.c    175	
; gpt2.c    176	  ///  -----------------------------------------------------------------------
; gpt2.c    177	  ///  Configuration of the GPT2 CAPREL:
; gpt2.c    178	  ///  -----------------------------------------------------------------------
; gpt2.c    179	  ///  - capture T5 into CAPREL is disabled
; gpt2.c    180	  ///  - capture trigger from pin CAPIN
; gpt2.c    181	  ///  - capure is disabled
; gpt2.c    182	  ///  - timer 5 is not cleared on a capture
; gpt2.c    183	  ///  - timer 5 is just captured without any correction
; gpt2.c    184	
; gpt2.c    185	  GPT12E_T5CON  |=  0x0000;      // load timer 5 control register
	?LINE	185
	MOV	R12,#0FF46h
	MOV	R12,[R12]
; gpt2.c    186	  GPT12E_CAPREL  =  0xE3C1;      // load CAPREL register
	?LINE	186
	MOV	R12,#0E3C1h
	MOV	0FE4Ah,R12
; gpt2.c    187	
; gpt2.c    188	  ///  -----------------------------------------------------------------------
; gpt2.c    189	  ///  Configuration of the used GPT2 Port Pins:
; gpt2.c    190	  ///  -----------------------------------------------------------------------
; gpt2.c    191	
; gpt2.c    192	
; gpt2.c    193	  ///  -----------------------------------------------------------------------
; gpt2.c    194	  ///  Configuration of the used GPT2 Interrupts:
; gpt2.c    195	  ///  -----------------------------------------------------------------------
; gpt2.c    196	
; gpt2.c    197	
; gpt2.c    198	  // USER CODE BEGIN (GPT2_Function,3)
; gpt2.c    199	
; gpt2.c    200	  // USER CODE END
; gpt2.c    201	
; gpt2.c    202	} //  End of function GPT2_viCAPREL
	?LINE	202
	RETS
_GPT2_vInit	ENDP
	?SYMB	'',$,17,202
; gpt2.c    203	
; gpt2.c    204	
; gpt2.c    205	
; gpt2.c    206	// USER CODE BEGIN (GPT2_General,10)
; gpt2.c    207	
; gpt2.c    208	// USER CODE END
; gpt2.c    209	
GPT2_1_PR	ENDS

	REGDEF	R0-R15
	END
