TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 30 2021  Time: 14:54:44  Page:   1
gpt2

 LOC CODE        LINE   SOURCELINE

                     1   ; TASKING C166/ST10 C compiler v8.7r1 Build 775
                     2   ; options: -e -Id:\programme\tasking\c166 v8.7r1\include -x2 -Bhoeufmknladij -OB
                     3   ;          -OE -zswitch_tabmem_default -zautobitastruct-4 -zautobita-0 -FSC -A1
                     4   ;          -zvolatile_union -O0 -g -newerr -s -i0 -Ms
                     5   $DEBUG
                     6   $NOLOCALS
                     7   $EXTEND2
                     8   $NOMOD166
                     9   $STDNAMES(regsuper10bo.def)
                    10   $EXTMAC
                    11   $CASE
                    12   $NOEXPANDREGBANK
                    13   $MODEL(SMALL)
                    14           NAME    GPT2_C
                    15           ?SYMB   'gpt2.c',32,80,16
                    16           ?SYMB   '',1,82,0
                    17           ?SYMB   '80166',0,84,0
                    18           ?SYMB   '',0,81,0
                    19           ?SYMB   'void',00H,45,1
                    20           ?SYMB   'char',080000H,45,2
                    21           ?SYMB   'unsigned char',080000H,45,3
                    22           ?SYMB   'short',0100000H,45,4
                    23           ?SYMB   'unsigned short',0100000H,45,5
                    24           ?SYMB   'long',0200000H,45,6
                    25           ?SYMB   'unsigned long',0200000H,45,7
                    26           ?SYMB   'float',0200000H,45,10
                    27           ?SYMB   'double',0400000H,45,11
                    28           ?SYMB   'int',0100000H,45,16
                    29           ?SYMB   'unsigned int',0100000H,45,18
                    30           ?SYMB   'bit',010000H,7,256
                    31           ?SYMB   'gpt2.c',0,29,1
                    32           ?SYMB   '',0,86,1
                    33   ; gpt2.c      1 //****************************************************************************
                    34   ; gpt2.c      2 // @Module        General Purpose Timer Unit (GPT2)
                    35   ; gpt2.c      3 // @Filename      GPT2.C
                    36   ; gpt2.c      4 // @Project       DAvE_config.dav
                    37   ; gpt2.c      5 //----------------------------------------------------------------------------
                    38   ; gpt2.c      6 // @Controller    Infineon XE167F-96F66
                    39   ; gpt2.c      7 //
                    40   ; gpt2.c      8 // @Compiler      Tasking Classic
                    41   ; gpt2.c      9 //
                    42   ; gpt2.c     10 // @Codegenerator 2.2
                    43   ; gpt2.c     11 //
                    44   ; gpt2.c     12 // @Description   This file contains functions that use the GPT2 module.
                    45   ; gpt2.c     13 //
                    46   ; gpt2.c     14 //----------------------------------------------------------------------------
                    47   ; gpt2.c     15 // @Date          30.09.2021 14:42:54
                    48   ; gpt2.c     16 //
                    49   ; gpt2.c     17 //****************************************************************************
                    50   ; gpt2.c     18 
                    51   ; gpt2.c     19 // USER CODE BEGIN (GPT2_General,1)
                    52   ; gpt2.c     20 
                    53   ; gpt2.c     21 // USER CODE END
                    54   ; gpt2.c     22 
                    55   ; gpt2.c     23 
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 30 2021  Time: 14:54:44  Page:   2
gpt2

 LOC CODE        LINE   SOURCELINE

                    56   ; gpt2.c     24 
                    57   ; gpt2.c     25 //****************************************************************************
                    58   ; gpt2.c     26 // @Project Includes
                    59   ; gpt2.c     27 //****************************************************************************
                    60   ; gpt2.c     28 
                    61   ; gpt2.c     29 #include "MAIN.H"
                    62           ?SYMB   'MAIN.H',0,29,2
                    63           ?SYMB   '',0,86,2
                    64           ?SYMB   'XE16xREGS.H',0,29,3
                    65           ?SYMB   '',0,86,3
                    66           ?SYMB   '',0,86,2
                    67           ?SYMB   'SCS.H',0,29,3
                    68           ?SYMB   '',0,86,3
                    69           ?SYMB   'T$2',0,14,257
                    70           ?SYMB   'SCS_EXTCLK_F_SYS',0,33,257
                    71           ?SYMB   'SCS_EXTCLK_F_OUT',1,33,257
                    72           ?SYMB   'SCS_EXTCLK_F_PLL',2,33,257
                    73           ?SYMB   'SCS_EXTCLK_F_OSC',3,33,257
                    74           ?SYMB   'SCS_EXTCLK_F_WU',4,33,257
                    75           ?SYMB   'SCS_EXTCLK_F_TCK',5,33,257
                    76           ?SYMB   'SCS_EXTCLK_F_OSC_FL',6,33,257
                    77           ?SYMB   'SCS_EXTCLK_F_RTC',8,33,257
                    78           ?SYMB   '',16,16,0
                    79           ?SYMB   'SCS_EXTCLK_Type',257,13,258
                    80           ?SYMB   '',0,86,2
                    81           ?SYMB   'IO.H',0,29,3
                    82           ?SYMB   '',0,86,3
                    83           ?SYMB   '',0,86,2
                    84           ?SYMB   'GPT1.H',0,29,3
                    85           ?SYMB   '',0,86,3
                    86           ?SYMB   '',0,86,2
                    87           ?SYMB   'GPT2.H',0,29,3
                    88           ?SYMB   '',0,86,3
                    89           ?SYMB   '',0,86,2
                    90           ?SYMB   'CCU62.H',0,29,3
                    91           ?SYMB   '',0,86,3
                    92           ?SYMB   '',0,86,2
                    93           ?SYMB   'CCU63.H',0,29,3
                    94           ?SYMB   '',0,86,3
                    95           ?SYMB   '',0,86,2
                    96           ?SYMB   'ADC0.H',0,29,3
                    97           ?SYMB   '',0,86,3
                    98           ?SYMB   'ubyte',3,13,259
                    99           ?SYMB   '',0,86,2
                   100           ?SYMB   '',0,86,1
                   101   ; gpt2.c     30 
                   102   ; gpt2.c     31 // USER CODE BEGIN (GPT2_General,2)
                   103   ; gpt2.c     32 
                   104   ; gpt2.c     33 // USER CODE END
                   105   ; gpt2.c     34 
                   106   ; gpt2.c     35 
                   107   ; gpt2.c     36 //****************************************************************************
                   108   ; gpt2.c     37 // @Macros
                   109   ; gpt2.c     38 //****************************************************************************
                   110   ; gpt2.c     39 
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 30 2021  Time: 14:54:44  Page:   3
gpt2

 LOC CODE        LINE   SOURCELINE

                   111   ; gpt2.c     40 // USER CODE BEGIN (GPT2_General,3)
                   112   ; gpt2.c     41 
                   113   ; gpt2.c     42 // USER CODE END
                   114   ; gpt2.c     43 
                   115   ; gpt2.c     44 
                   116   ; gpt2.c     45 //****************************************************************************
                   117   ; gpt2.c     46 // @Defines
                   118   ; gpt2.c     47 //****************************************************************************
                   119   ; gpt2.c     48 
                   120   ; gpt2.c     49 // USER CODE BEGIN (GPT2_General,4)
                   121   ; gpt2.c     50 
                   122   ; gpt2.c     51 // USER CODE END
                   123   ; gpt2.c     52 
                   124   ; gpt2.c     53 
                   125   ; gpt2.c     54 //****************************************************************************
                   126   ; gpt2.c     55 // @Typedefs
                   127   ; gpt2.c     56 //****************************************************************************
                   128   ; gpt2.c     57 
                   129   ; gpt2.c     58 // USER CODE BEGIN (GPT2_General,5)
                   130   ; gpt2.c     59 
                   131   ; gpt2.c     60 // USER CODE END
                   132   ; gpt2.c     61 
                   133   ; gpt2.c     62 
                   134   ; gpt2.c     63 //****************************************************************************
                   135   ; gpt2.c     64 // @Imported Global Variables
                   136   ; gpt2.c     65 //****************************************************************************
                   137   ; gpt2.c     66 
                   138   ; gpt2.c     67 // USER CODE BEGIN (GPT2_General,6)
                   139   ; gpt2.c     68         extern const unsigned int ARRAY_SIZE;
                   140   ; gpt2.c     69         extern  unsigned int rampIndex;
                   141   ; gpt2.c     70         extern volatile float velocity;
                   142   ; gpt2.c     71         volatile unsigned int inc;
                   143   ; gpt2.c     72 // USER CODE END
                   144   ; gpt2.c     73 
                   145   ; gpt2.c     74 
                   146   ; gpt2.c     75 //****************************************************************************
                   147   ; gpt2.c     76 // @Global Variables
                   148   ; gpt2.c     77 //****************************************************************************
                   149   ; gpt2.c     78 
                   150   ; gpt2.c     79 // USER CODE BEGIN (GPT2_General,7)
                   151   ; gpt2.c     80 
                   152   ; gpt2.c     81 // USER CODE END
                   153   ; gpt2.c     82 
                   154   ; gpt2.c     83 
                   155   ; gpt2.c     84 //****************************************************************************
                   156   ; gpt2.c     85 // @External Prototypes
                   157   ; gpt2.c     86 //****************************************************************************
                   158   ; gpt2.c     87 
                   159   ; gpt2.c     88 // USER CODE BEGIN (GPT2_General,8)
                   160   ; gpt2.c     89 
                   161   ; gpt2.c     90 // USER CODE END
                   162   ; gpt2.c     91 
                   163   ; gpt2.c     92 
                   164   ; gpt2.c     93 
                   165   ; gpt2.c     94 //****************************************************************************
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 30 2021  Time: 14:54:44  Page:   4
gpt2

 LOC CODE        LINE   SOURCELINE

                   166   ; gpt2.c     95 // @Prototypes Of Local Functions
                   167   ; gpt2.c     96 //****************************************************************************
                   168   ; gpt2.c     97 
                   169   ; gpt2.c     98 // USER CODE BEGIN (GPT2_General,9)
                   170   ; gpt2.c     99 
                   171   ; gpt2.c    100 // USER CODE END
                   172   ; gpt2.c    101 
                   173   ; gpt2.c    102 
                   174   ; gpt2.c    103 //****************************************************************************
                   175   ; gpt2.c    104 // @Function      void GPT2_vInit(void) 
                   176   ; gpt2.c    105 //
                   177   ; gpt2.c    106 //----------------------------------------------------------------------------
                   178   ; gpt2.c    107 // @Description   This is the initialization function of the GPT2 function 
                   179   ; gpt2.c    108 //                library. It is assumed that the SFRs used by this library 
                   180   ; gpt2.c    109 //                are in reset state. 
                   181   ; gpt2.c    110 //
                   182   ; gpt2.c    111 //----------------------------------------------------------------------------
                   183   ; gpt2.c    112 // @Returnvalue   None
                   184   ; gpt2.c    113 //
                   185   ; gpt2.c    114 //----------------------------------------------------------------------------
                   186   ; gpt2.c    115 // @Parameters    None
                   187   ; gpt2.c    116 //
                   188   ; gpt2.c    117 //----------------------------------------------------------------------------
                   189   ; gpt2.c    118 // @Date          30.09.2021
                   190   ; gpt2.c    119 //
                   191   ; gpt2.c    120 //****************************************************************************
                   192   ; gpt2.c    121 
                   193   ; gpt2.c    122 // USER CODE BEGIN (Init,1)
                   194   ; gpt2.c    123 
                   195   ; gpt2.c    124 // USER CODE END
                   196   ; gpt2.c    125 
                   197   ; gpt2.c    126 void GPT2_vInit(void)
                   198   ; gpt2.c    127 {
                   199   GPT2_1_PR       SECTION CODE WORD PUBLIC 'CPROGRAM'
                   200           ?LINE   127
                   201           PUBLIC  _GPT2_vInit
               R   202           ?SYMB   'GPT2_vInit',_GPT2_vInit,37,1
                   203           ?SYMB   '',127,8,34
                   204           ?SYMB   'uword',18,13,261
                   205   _GPT2_vInit     PROC    FAR
                   206           ?SYMB   '',00H,95,0
                   207   ; Locals:
                   208   ; 
                   209   ; Statics:
                   210   ; 
                   211   ; CSEs:
                   212   ; 
                   213   ; gpt2.c    128 
                   214   ; gpt2.c    129   // USER CODE BEGIN (Init,2)
                   215   ; gpt2.c    130 
                   216   ; gpt2.c    131   // USER CODE END
                   217   ; gpt2.c    132   ///  -----------------------------------------------------------------------
                   218   ; gpt2.c    133   ///  Configuration of Timer Block Prescaler 1:
                   219   ; gpt2.c    134   ///  -----------------------------------------------------------------------
                   220   ; gpt2.c    135   GPT12E_KSCCFG  =  0x0003;      // Module Enable
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 30 2021  Time: 14:54:44  Page:   5
gpt2

 LOC CODE        LINE   SOURCELINE

                   221           ?LINE   135
0000 E03C          222           MOV     R12,#03h
0002 F6FC1CFE      223           MOV     0FE1Ch,R12
                   224   ; gpt2.c    136 
                   225   ; gpt2.c    137 
                   226   ; gpt2.c    138   _nop();  // one cycle delay 
                   227           ?LINE   138
0006 CC00          228           NOP
                   229   ; gpt2.c    139 
                   230   ; gpt2.c    140   _nop();  // one cycle delay 
                   231           ?LINE   140
0008 CC00          232           NOP
                   233   ; gpt2.c    141 
                   234   ; gpt2.c    142 
                   235   ; gpt2.c    143   ///  -----------------------------------------------------------------------
                   236   ; gpt2.c    144   ///  Configuration of Timer Block Prescaler 2:
                   237   ; gpt2.c    145   ///  -----------------------------------------------------------------------
                   238   ; gpt2.c    146   ///  - prescaler for timer block 2 is 2
                   239   ; gpt2.c    147 
                   240   ; gpt2.c    148 
                   241   ; gpt2.c    149   ///  -----------------------------------------------------------------------
                   242   ; gpt2.c    150   ///  Configuration of the GPT2 Core Timer 5:
                   243   ; gpt2.c    151   ///  -----------------------------------------------------------------------
                   244   ; gpt2.c    152   ///  - timer 5 works in timer mode
                   245   ; gpt2.c    153   ///  - prescaler factor is 2
                   246   ; gpt2.c    154   ///  - up/down control bit is reset
                   247   ; gpt2.c    155   ///  - external up/down control is disabled
                   248   ; gpt2.c    156   ///  - timer 5 run bit is reset
                   249   ; gpt2.c    157   ///  - timer 5 remote control is disabled
                   250   ; gpt2.c    158 
                   251   ; gpt2.c    159   GPT12E_T5CON   =  0x0000;      // load timer 5 control register
                   252           ?LINE   159
000A E00C          253           MOV     R12,#00h
000C F6FC46FF      254           MOV     0FF46h,R12
                   255   ; gpt2.c    160   GPT12E_T5      =  0xFFFF;      // load timer 5 register
                   256           ?LINE   160
0010 E6FCFFFF      257           MOV     R12,#0FFFFh
0014 F6FC46FE      258           MOV     0FE46h,R12
                   259   ; gpt2.c    161 
                   260   ; gpt2.c    162   ///  -----------------------------------------------------------------------
                   261   ; gpt2.c    163   ///  Configuration of the GPT2 Core Timer 6:
                   262   ; gpt2.c    164   ///  -----------------------------------------------------------------------
                   263   ; gpt2.c    165   ///  - timer 6 works in timer mode
                   264   ; gpt2.c    166   ///  - prescaler factor is 8
                   265   ; gpt2.c    167   ///  - up/down control bit is reset
                   266   ; gpt2.c    168   ///  - external up/down control is disabled
                   267   ; gpt2.c    169   ///  - alternate output function T6OUT (P6.2) is disabled
                   268   ; gpt2.c    170   ///  - alternate output function T6OUT (P7.0) is disabled
                   269   ; gpt2.c    171   ///  - timer 6 output toggle latch (T6OTL) is set to 0
                   270   ; gpt2.c    172   ///  - timer 6 run bit is reset
                   271   ; gpt2.c    173   ///  - timer 6 is not cleared on a capture
                   272   ; gpt2.c    174 
                   273   ; gpt2.c    175   GPT12E_T6CON   =  0x0802;      // load timer 6 control register
                   274           ?LINE   175
0018 E6FC0208      275           MOV     R12,#0802h
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 30 2021  Time: 14:54:44  Page:   6
gpt2

 LOC CODE        LINE   SOURCELINE

001C F6FC48FF      276           MOV     0FF48h,R12
                   277   ; gpt2.c    176   GPT12E_T6      =  0x0218;      // load timer 6 register
                   278           ?LINE   176
0020 E6FC1802      279           MOV     R12,#0218h
0024 F6FC48FE      280           MOV     0FE48h,R12
                   281   ; gpt2.c    177 
                   282   ; gpt2.c    178   ///  -----------------------------------------------------------------------
                   283   ; gpt2.c    179   ///  Configuration of the GPT2 CAPREL:
                   284   ; gpt2.c    180   ///  -----------------------------------------------------------------------
                   285   ; gpt2.c    181   ///  - capture T5 into CAPREL is disabled
                   286   ; gpt2.c    182   ///  - capture trigger from pin CAPIN
                   287   ; gpt2.c    183   ///  - capure is disabled
                   288   ; gpt2.c    184   ///  - timer 5 is not cleared on a capture
                   289   ; gpt2.c    185   ///  - timer 5 is just captured without any correction
                   290   ; gpt2.c    186 
                   291   ; gpt2.c    187   GPT12E_T5CON  |=  0x0000;      // load timer 5 control register
                   292           ?LINE   187
0028 E6FC46FF      293           MOV     R12,#0FF46h
002C A8CC          294           MOV     R12,[R12]
                   295   ; gpt2.c    188   GPT12E_CAPREL  =  0x0218;      // load CAPREL register
                   296           ?LINE   188
002E E6FC1802      297           MOV     R12,#0218h
0032 F6FC4AFE      298           MOV     0FE4Ah,R12
                   299   ; gpt2.c    189 
                   300   ; gpt2.c    190   ///  -----------------------------------------------------------------------
                   301   ; gpt2.c    191   ///  Configuration of the used GPT2 Port Pins:
                   302   ; gpt2.c    192   ///  -----------------------------------------------------------------------
                   303   ; gpt2.c    193   ///  - P5.3 is used for  GPT12E Timer2 Count input(T3IN)
                   304   ; gpt2.c    194 
                   305   ; gpt2.c    195 
                   306   ; gpt2.c    196   ///  -----------------------------------------------------------------------
                   307   ; gpt2.c    197   ///  Configuration of the used GPT2 Interrupts:
                   308   ; gpt2.c    198   ///  -----------------------------------------------------------------------
                   309   ; gpt2.c    199   ///  timer 6 service request node configuration:
                   310   ; gpt2.c    200   ///  - timer 6 interrupt priority level (ILVL) = 14
                   311   ; gpt2.c    201   ///  - timer 6 interrupt group level (GLVL) = 0
                   312   ; gpt2.c    202   ///  - timer 6 group priority extension (GPX) = 0
                   313   ; gpt2.c    203 
                   314   ; gpt2.c    204   GPT12E_T6IC    =  0x0078;     
                   315           ?LINE   204
0036 E6FC7800      316           MOV     R12,#078h
003A F6FC68FF      317           MOV     0FF68h,R12
                   318   ; gpt2.c    205 
                   319   ; gpt2.c    206   ///  Use PEC channel 0 for GPT2 T6 INT:
                   320   ; gpt2.c    207   ///  - normal interrupt
                   321   ; gpt2.c    208   ///  - pointers are not modified
                   322   ; gpt2.c    209   ///  - transfer a word
                   323   ; gpt2.c    210   ///  - service End of PEC interrrupt by a EOP interrupt node is disabled
                   324   ; gpt2.c    211   ///  - channel link mode is disabled
                   325   ; gpt2.c    212 
                   326   ; gpt2.c    213   PECC0          =  0x0000;      // load PECC0 control register
                   327           ?LINE   213
003E E00C          328           MOV     R12,#00h
0040 F6FCC0FE      329           MOV     0FEC0h,R12
                   330   ; gpt2.c    214 
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 30 2021  Time: 14:54:44  Page:   7
gpt2

 LOC CODE        LINE   SOURCELINE

                   331   ; gpt2.c    215 
                   332   ; gpt2.c    216 
                   333   ; gpt2.c    217 
                   334   ; gpt2.c    218   // USER CODE BEGIN (GPT2_Function,3)
                   335   ; gpt2.c    219 
                   336   ; gpt2.c    220   // USER CODE END
                   337   ; gpt2.c    221 
                   338   ; gpt2.c    222 } //  End of function GPT2_viCAPREL
                   339           ?LINE   222
0044 DB00          340           RETS
                   341   _GPT2_vInit     ENDP
               R   342           ?SYMB   '',$,17,222
                   343   ; gpt2.c    223 
                   344   ; gpt2.c    224 //****************************************************************************
                   345   ; gpt2.c    225 // @Function      void GPT2_viTmr6(void) 
                   346   ; gpt2.c    226 //
                   347   ; gpt2.c    227 //----------------------------------------------------------------------------
                   348   ; gpt2.c    228 // @Description   This is the interrupt service routine for the GPT2 timer 6. 
                   349   ; gpt2.c    229 //                It is called up in the case of over or underflow of the 
                   350   ; gpt2.c    230 //                timer 6 register.
                   351   ; gpt2.c    231 //                
                   352   ; gpt2.c    232 //                Please note that you have to add application specific code 
                   353   ; gpt2.c    233 //                to this function.
                   354   ; gpt2.c    234 //
                   355   ; gpt2.c    235 //----------------------------------------------------------------------------
                   356   ; gpt2.c    236 // @Returnvalue   None
                   357   ; gpt2.c    237 //
                   358   ; gpt2.c    238 //----------------------------------------------------------------------------
                   359   ; gpt2.c    239 // @Parameters    None
                   360   ; gpt2.c    240 //
                   361   ; gpt2.c    241 //----------------------------------------------------------------------------
                   362   ; gpt2.c    242 // @Date          30.09.2021
                   363   ; gpt2.c    243 //
                   364   ; gpt2.c    244 //****************************************************************************
                   365   ; gpt2.c    245 
                   366   ; gpt2.c    246 // USER CODE BEGIN (Tmr6,1)
                   367   ; gpt2.c    247 
                   368   ; gpt2.c    248 // USER CODE END
                   369   ; gpt2.c    249 
                   370   ; gpt2.c    250 _interrupt(T6INT)  void GPT2_viTmr6(void)
                   371   ; gpt2.c    251 {
               R   372           ?SYMB   'GPT2_viTmr6',_GPT2_viTmr6,37,1
                   373           ?SYMB   '',251,8,16
                   374   _GPT2_viTmr6    PROC TASK GPT2_TASK INTNO GPT2_INUM = 024h
                   375           ?LINE   251
                   376           ?SYMB   '',00H,95,0
0046 F6F00000  R   377           MOV     GPT2_RB,R0
004A C6080000  R   378           SCXT    CP,#GPT2_RB
004E C6871000      379           SCXT    MDC,#010h
0052 EC00          380           PUSH    DPP0
0054 E6000000  R   381           MOV     DPP0,#PAG ?BASE_DPP0
0058 CC00          382           NOP
005A EC02          383           PUSH    DPP2
005C E6020000  R   384           MOV     DPP2,#PAG ?BASE_DPP2
0060 CC00          385           NOP
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 30 2021  Time: 14:54:44  Page:   8
gpt2

 LOC CODE        LINE   SOURCELINE

0062 EC06          386           PUSH    MDH
0064 EC07          387           PUSH    MDL
0066 ECEF          388           PUSH    MSW
0068 EC2E          389           PUSH    MAL
006A EC2F          390           PUSH    MAH
006C ECEE          391           PUSH    MCW
006E C6ED0000      392           SCXT    MRW,#00h
0072 EC84          393           PUSH    IDX0
0074 EC85          394           PUSH    IDX1
0076 D180          395           EXTR    #01h
0078 EC00     1    396           PUSH    QX0
007A D180          397           EXTR    #01h
007C EC01     1    398           PUSH    QX1
007E D180          399           EXTR    #01h
0080 EC02     1    400           PUSH    QR0
0082 D180          401           EXTR    #01h
0084 EC03     1    402           PUSH    QR1
                   403   ; Locals:
                   404   ; 
                   405   ; Statics:
                   406   ; 
                   407   ; CSEs:
                   408   ; 
                   409   ; gpt2.c    252   // USER CODE BEGIN (Tmr6,2)
                   410   ; gpt2.c    253         //Index für den Programmablauf, größer 1751 damit der Programmablauf be
                         i Überlauf der Variable RampIndex (16 Bit) nicht erneut von vorn startet 
                   411   ; gpt2.c    254         if(rampIndex < 5251){
                   412           ?LINE   254
0086 F2FC0000  R   413           MOV     R12,_rampIndex
008A 46FC8314      414           CMP     R12,#01483h
008E 9D05          415           JMPR    cc_UGE,_7
                   416   ; gpt2.c    255                 rampIndex++;
                   417           ?LINE   255
0090 F2FC0000  R   418           MOV     R12,_rampIndex
0094 08C1          419           ADD     R12,#01h
0096 F6FC0000  R   420           MOV     _rampIndex,R12
                   421   ; gpt2.c    256         }
                   422           ?LINE   256
009A               423   _7:
                   424   ; gpt2.c    257          
                   425   ; gpt2.c    258          inc = GPT12E_T4;
                   426           ?LINE   258
009A F2FC44FE      427           MOV     R12,0FE44h
009E F6FC0000  R   428           MOV     _inc,R12
                   429   ; gpt2.c    259          velocity = (1000 * (float) inc)/(8);
                   430           ?LINE   259
00A2 F2F40000  R   431           MOV     R4,_inc
00A6 DA000000  R   432           CALLS   SEG __cuf24r,__cuf24r
00AA E6FA7A44      433           MOV     R10,#0447Ah
00AE E00B          434           MOV     R11,#00h
00B0 DA000000  R   435           CALLS   SEG __mlf4r,__mlf4r
00B4 E6FA0041      436           MOV     R10,#04100h
00B8 E00B          437           MOV     R11,#00h
00BA DA000000  R   438           CALLS   SEG __dvf4r,__dvf4r
00BE F6F40000  R   439           MOV     _velocity,R4
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 30 2021  Time: 14:54:44  Page:   9
gpt2

 LOC CODE        LINE   SOURCELINE

00C2 F6F50000  R   440           MOV     (_velocity+2),R5
                   441   ; gpt2.c    260          velocity = velocity/2048;
                   442           ?LINE   260
00C6 F2F40000  R   443           MOV     R4,_velocity
00CA F2F50000  R   444           MOV     R5,(_velocity+2)
00CE E6FA0045      445           MOV     R10,#04500h
00D2 E00B          446           MOV     R11,#00h
00D4 DA000000  R   447           CALLS   SEG __dvf4r,__dvf4r
00D8 F6F40000  R   448           MOV     _velocity,R4
00DC F6F50000  R   449           MOV     (_velocity+2),R5
                   450   ; gpt2.c    261          GPT12E_T4 = 0;
                   451           ?LINE   261
00E0 E00C          452           MOV     R12,#00h
00E2 F6FC44FE      453           MOV     0FE44h,R12
                   454   ; gpt2.c    262   // USER CODE END
                   455   ; gpt2.c    263 
                   456   ; gpt2.c    264 } //  End of function GPT2_viTmr6
                   457           ?LINE   264
00E6 D180          458           EXTR    #01h
00E8 FC03     1    459           POP     QR1
00EA D180          460           EXTR    #01h
00EC FC02     1    461           POP     QR0
00EE D180          462           EXTR    #01h
00F0 FC01     1    463           POP     QX1
00F2 D180          464           EXTR    #01h
00F4 FC00     1    465           POP     QX0
00F6 FC85          466           POP     IDX1
00F8 FC84          467           POP     IDX0
00FA FCED          468           POP     MRW
00FC FCEE          469           POP     MCW
00FE FC2F          470           POP     MAH
0100 FC2E          471           POP     MAL
0102 FCEF          472           POP     MSW
0104 FC07          473           POP     MDL
0106 FC06          474           POP     MDH
0108 FC02          475           POP     DPP2
010A FC00          476           POP     DPP0
010C FC87          477           POP     MDC
010E FC08          478           POP     CP
                   479           ?LINE   264
0110 FB88          480           RETI
                   481   _GPT2_viTmr6    ENDP
               R   482           ?SYMB   '',$,17,264
                   483   ; gpt2.c    265 
                   484   ; gpt2.c    266 
                   485   ; gpt2.c    267 
                   486   ; gpt2.c    268 
                   487   ; gpt2.c    269 // USER CODE BEGIN (GPT2_General,10)
                   488   ; gpt2.c    270 
                   489   ; gpt2.c    271 // USER CODE END
                   490   ; gpt2.c    272 
                   491   GPT2_1_PR       ENDS
                   492   
                   493   GPT2_2_NB       SECTION LDAT WORD PUBLIC 'CNEAR'
0000               494   GPT2_2_NB_ENTRY LABEL   BYTE
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 30 2021  Time: 14:54:44  Page:  10
gpt2

 LOC CODE        LINE   SOURCELINE

0000               495   _inc    LABEL   WORD
0000               496           DS      2
                   497           PUBLIC  _inc
               R   498           ?SYMB   'inc',_inc,22,18
                   499   GPT2_2_NB       ENDS
                   500   
                   501   C166_BSS        SECTION PDAT WORD GLOBAL 'CINITROM'
0000 05000000  R   502           DW      05h,GPT2_2_NB_ENTRY,02h
0004 0200        
                   503   C166_BSS        ENDS
                   504   
                   505   $FLOAT(ANSI)
                   506           EXTERN  _velocity:WORD
                   507           EXTERN  _rampIndex:WORD
                   508           EXTERN  __cuf24r:FAR
                   509           EXTERN  __mlf4r:FAR
                   510           EXTERN  __dvf4r:FAR
                   511   GPT2_RB REGDEF  R0-R15
                   512           END

total errors: 0, warnings: 0

