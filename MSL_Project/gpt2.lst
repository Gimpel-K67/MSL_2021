TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 28 2021  Time: 15:42:21  Page:   1
gpt2

 LOC CODE        LINE   SOURCELINE

                     1   ; TASKING C166/ST10 C compiler v8.7r1 Build 775
                     2   ; options: -e -Id:\programme\tasking\c166 v8.7r1\include -x2 -Bhoeufmknladij -OB
                     3   ;          -OE -zswitch_tabmem_default -zautobitastruct-4 -zautobita-0 -FSC -A1
                     4   ;          -zvolatile_union -O0 -g -newerr -s -i0 -Ms
                     5   $DEBUG
                     6   $NOLOCALS
                     7   $EXTEND2
                     8   $NOMOD166
                     9   $STDNAMES(regsuper10bo.def)
                    10   $EXTMAC
                    11   $CASE
                    12   $NOEXPANDREGBANK
                    13   $MODEL(SMALL)
                    14           NAME    GPT2_C
                    15           ?SYMB   'gpt2.c',32,80,16
                    16           ?SYMB   '',1,82,0
                    17           ?SYMB   '80166',0,84,0
                    18           ?SYMB   '',0,81,0
                    19           ?SYMB   'void',00H,45,1
                    20           ?SYMB   'char',080000H,45,2
                    21           ?SYMB   'unsigned char',080000H,45,3
                    22           ?SYMB   'short',0100000H,45,4
                    23           ?SYMB   'unsigned short',0100000H,45,5
                    24           ?SYMB   'long',0200000H,45,6
                    25           ?SYMB   'unsigned long',0200000H,45,7
                    26           ?SYMB   'float',0200000H,45,10
                    27           ?SYMB   'double',0400000H,45,11
                    28           ?SYMB   'int',0100000H,45,16
                    29           ?SYMB   'unsigned int',0100000H,45,18
                    30           ?SYMB   'bit',010000H,7,256
                    31           ?SYMB   'gpt2.c',0,29,1
                    32           ?SYMB   '',0,86,1
                    33   ; gpt2.c      1 //****************************************************************************
                    34   ; gpt2.c      2 // @Module        General Purpose Timer Unit (GPT2)
                    35   ; gpt2.c      3 // @Filename      GPT2.C
                    36   ; gpt2.c      4 // @Project       DAvE_config.dav
                    37   ; gpt2.c      5 //----------------------------------------------------------------------------
                    38   ; gpt2.c      6 // @Controller    Infineon XE167F-96F66
                    39   ; gpt2.c      7 //
                    40   ; gpt2.c      8 // @Compiler      Tasking Classic
                    41   ; gpt2.c      9 //
                    42   ; gpt2.c     10 // @Codegenerator 2.2
                    43   ; gpt2.c     11 //
                    44   ; gpt2.c     12 // @Description   This file contains functions that use the GPT2 module.
                    45   ; gpt2.c     13 //
                    46   ; gpt2.c     14 //----------------------------------------------------------------------------
                    47   ; gpt2.c     15 // @Date          28.09.2021 15:41:39
                    48   ; gpt2.c     16 //
                    49   ; gpt2.c     17 //****************************************************************************
                    50   ; gpt2.c     18 
                    51   ; gpt2.c     19 // USER CODE BEGIN (GPT2_General,1)
                    52   ; gpt2.c     20 
                    53   ; gpt2.c     21 // USER CODE END
                    54   ; gpt2.c     22 
                    55   ; gpt2.c     23 
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 28 2021  Time: 15:42:21  Page:   2
gpt2

 LOC CODE        LINE   SOURCELINE

                    56   ; gpt2.c     24 
                    57   ; gpt2.c     25 //****************************************************************************
                    58   ; gpt2.c     26 // @Project Includes
                    59   ; gpt2.c     27 //****************************************************************************
                    60   ; gpt2.c     28 
                    61   ; gpt2.c     29 #include "MAIN.H"
                    62           ?SYMB   'MAIN.H',0,29,2
                    63           ?SYMB   '',0,86,2
                    64           ?SYMB   'XE16xREGS.H',0,29,3
                    65           ?SYMB   '',0,86,3
                    66           ?SYMB   '',0,86,2
                    67           ?SYMB   'SCS.H',0,29,3
                    68           ?SYMB   '',0,86,3
                    69           ?SYMB   'T$2',0,14,257
                    70           ?SYMB   'SCS_EXTCLK_F_SYS',0,33,257
                    71           ?SYMB   'SCS_EXTCLK_F_OUT',1,33,257
                    72           ?SYMB   'SCS_EXTCLK_F_PLL',2,33,257
                    73           ?SYMB   'SCS_EXTCLK_F_OSC',3,33,257
                    74           ?SYMB   'SCS_EXTCLK_F_WU',4,33,257
                    75           ?SYMB   'SCS_EXTCLK_F_TCK',5,33,257
                    76           ?SYMB   'SCS_EXTCLK_F_OSC_FL',6,33,257
                    77           ?SYMB   'SCS_EXTCLK_F_RTC',8,33,257
                    78           ?SYMB   '',16,16,0
                    79           ?SYMB   'SCS_EXTCLK_Type',257,13,258
                    80           ?SYMB   '',0,86,2
                    81           ?SYMB   'IO.H',0,29,3
                    82           ?SYMB   '',0,86,3
                    83           ?SYMB   '',0,86,2
                    84           ?SYMB   'GPT1.H',0,29,3
                    85           ?SYMB   '',0,86,3
                    86           ?SYMB   '',0,86,2
                    87           ?SYMB   'GPT2.H',0,29,3
                    88           ?SYMB   '',0,86,3
                    89           ?SYMB   '',0,86,2
                    90           ?SYMB   'CCU62.H',0,29,3
                    91           ?SYMB   '',0,86,3
                    92           ?SYMB   '',0,86,2
                    93           ?SYMB   'CCU63.H',0,29,3
                    94           ?SYMB   '',0,86,3
                    95           ?SYMB   '',0,86,2
                    96           ?SYMB   'ADC0.H',0,29,3
                    97           ?SYMB   '',0,86,3
                    98           ?SYMB   'ubyte',3,13,259
                    99           ?SYMB   '',0,86,2
                   100           ?SYMB   '',0,86,1
                   101   ; gpt2.c     30 
                   102   ; gpt2.c     31 // USER CODE BEGIN (GPT2_General,2)
                   103   ; gpt2.c     32 
                   104   ; gpt2.c     33 // USER CODE END
                   105   ; gpt2.c     34 
                   106   ; gpt2.c     35 
                   107   ; gpt2.c     36 //****************************************************************************
                   108   ; gpt2.c     37 // @Macros
                   109   ; gpt2.c     38 //****************************************************************************
                   110   ; gpt2.c     39 
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 28 2021  Time: 15:42:21  Page:   3
gpt2

 LOC CODE        LINE   SOURCELINE

                   111   ; gpt2.c     40 // USER CODE BEGIN (GPT2_General,3)
                   112   ; gpt2.c     41 
                   113   ; gpt2.c     42 // USER CODE END
                   114   ; gpt2.c     43 
                   115   ; gpt2.c     44 
                   116   ; gpt2.c     45 //****************************************************************************
                   117   ; gpt2.c     46 // @Defines
                   118   ; gpt2.c     47 //****************************************************************************
                   119   ; gpt2.c     48 
                   120   ; gpt2.c     49 // USER CODE BEGIN (GPT2_General,4)
                   121   ; gpt2.c     50 
                   122   ; gpt2.c     51 // USER CODE END
                   123   ; gpt2.c     52 
                   124   ; gpt2.c     53 
                   125   ; gpt2.c     54 //****************************************************************************
                   126   ; gpt2.c     55 // @Typedefs
                   127   ; gpt2.c     56 //****************************************************************************
                   128   ; gpt2.c     57 
                   129   ; gpt2.c     58 // USER CODE BEGIN (GPT2_General,5)
                   130   ; gpt2.c     59 
                   131   ; gpt2.c     60 // USER CODE END
                   132   ; gpt2.c     61 
                   133   ; gpt2.c     62 
                   134   ; gpt2.c     63 //****************************************************************************
                   135   ; gpt2.c     64 // @Imported Global Variables
                   136   ; gpt2.c     65 //****************************************************************************
                   137   ; gpt2.c     66 
                   138   ; gpt2.c     67 // USER CODE BEGIN (GPT2_General,6)
                   139   ; gpt2.c     68         extern const unsigned int ARRAY_SIZE;
                   140   ; gpt2.c     69         extern  unsigned int rampIndex;
                   141   ; gpt2.c     70         extern volatile float velocity;
                   142   ; gpt2.c     71         extern volatile float rpm;
                   143   ; gpt2.c     72         volatile unsigned int inc;
                   144   ; gpt2.c     73 // USER CODE END
                   145   ; gpt2.c     74 
                   146   ; gpt2.c     75 
                   147   ; gpt2.c     76 //****************************************************************************
                   148   ; gpt2.c     77 // @Global Variables
                   149   ; gpt2.c     78 //****************************************************************************
                   150   ; gpt2.c     79 
                   151   ; gpt2.c     80 // USER CODE BEGIN (GPT2_General,7)
                   152   ; gpt2.c     81 
                   153   ; gpt2.c     82 // USER CODE END
                   154   ; gpt2.c     83 
                   155   ; gpt2.c     84 
                   156   ; gpt2.c     85 //****************************************************************************
                   157   ; gpt2.c     86 // @External Prototypes
                   158   ; gpt2.c     87 //****************************************************************************
                   159   ; gpt2.c     88 
                   160   ; gpt2.c     89 // USER CODE BEGIN (GPT2_General,8)
                   161   ; gpt2.c     90 
                   162   ; gpt2.c     91 // USER CODE END
                   163   ; gpt2.c     92 
                   164   ; gpt2.c     93 
                   165   ; gpt2.c     94 
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 28 2021  Time: 15:42:21  Page:   4
gpt2

 LOC CODE        LINE   SOURCELINE

                   166   ; gpt2.c     95 //****************************************************************************
                   167   ; gpt2.c     96 // @Prototypes Of Local Functions
                   168   ; gpt2.c     97 //****************************************************************************
                   169   ; gpt2.c     98 
                   170   ; gpt2.c     99 // USER CODE BEGIN (GPT2_General,9)
                   171   ; gpt2.c    100 
                   172   ; gpt2.c    101 // USER CODE END
                   173   ; gpt2.c    102 
                   174   ; gpt2.c    103 
                   175   ; gpt2.c    104 //****************************************************************************
                   176   ; gpt2.c    105 // @Function      void GPT2_vInit(void) 
                   177   ; gpt2.c    106 //
                   178   ; gpt2.c    107 //----------------------------------------------------------------------------
                   179   ; gpt2.c    108 // @Description   This is the initialization function of the GPT2 function 
                   180   ; gpt2.c    109 //                library. It is assumed that the SFRs used by this library 
                   181   ; gpt2.c    110 //                are in reset state. 
                   182   ; gpt2.c    111 //
                   183   ; gpt2.c    112 //----------------------------------------------------------------------------
                   184   ; gpt2.c    113 // @Returnvalue   None
                   185   ; gpt2.c    114 //
                   186   ; gpt2.c    115 //----------------------------------------------------------------------------
                   187   ; gpt2.c    116 // @Parameters    None
                   188   ; gpt2.c    117 //
                   189   ; gpt2.c    118 //----------------------------------------------------------------------------
                   190   ; gpt2.c    119 // @Date          28.09.2021
                   191   ; gpt2.c    120 //
                   192   ; gpt2.c    121 //****************************************************************************
                   193   ; gpt2.c    122 
                   194   ; gpt2.c    123 // USER CODE BEGIN (Init,1)
                   195   ; gpt2.c    124 
                   196   ; gpt2.c    125 // USER CODE END
                   197   ; gpt2.c    126 
                   198   ; gpt2.c    127 void GPT2_vInit(void)
                   199   ; gpt2.c    128 {
                   200   GPT2_1_PR       SECTION CODE WORD PUBLIC 'CPROGRAM'
                   201           ?LINE   128
                   202           PUBLIC  _GPT2_vInit
               R   203           ?SYMB   'GPT2_vInit',_GPT2_vInit,37,1
                   204           ?SYMB   '',128,8,34
                   205           ?SYMB   'uword',18,13,261
                   206   _GPT2_vInit     PROC    FAR
                   207           ?SYMB   '',00H,95,0
                   208   ; Locals:
                   209   ; 
                   210   ; Statics:
                   211   ; 
                   212   ; CSEs:
                   213   ; 
                   214   ; gpt2.c    129 
                   215   ; gpt2.c    130   // USER CODE BEGIN (Init,2)
                   216   ; gpt2.c    131 
                   217   ; gpt2.c    132   // USER CODE END
                   218   ; gpt2.c    133   ///  -----------------------------------------------------------------------
                   219   ; gpt2.c    134   ///  Configuration of Timer Block Prescaler 1:
                   220   ; gpt2.c    135   ///  -----------------------------------------------------------------------
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 28 2021  Time: 15:42:21  Page:   5
gpt2

 LOC CODE        LINE   SOURCELINE

                   221   ; gpt2.c    136   GPT12E_KSCCFG  =  0x0003;      // Module Enable
                   222           ?LINE   136
0000 E03C          223           MOV     R12,#03h
0002 F6FC1CFE      224           MOV     0FE1Ch,R12
                   225   ; gpt2.c    137 
                   226   ; gpt2.c    138 
                   227   ; gpt2.c    139   _nop();  // one cycle delay 
                   228           ?LINE   139
0006 CC00          229           NOP
                   230   ; gpt2.c    140 
                   231   ; gpt2.c    141   _nop();  // one cycle delay 
                   232           ?LINE   141
0008 CC00          233           NOP
                   234   ; gpt2.c    142 
                   235   ; gpt2.c    143 
                   236   ; gpt2.c    144   ///  -----------------------------------------------------------------------
                   237   ; gpt2.c    145   ///  Configuration of Timer Block Prescaler 2:
                   238   ; gpt2.c    146   ///  -----------------------------------------------------------------------
                   239   ; gpt2.c    147   ///  - prescaler for timer block 2 is 2
                   240   ; gpt2.c    148 
                   241   ; gpt2.c    149 
                   242   ; gpt2.c    150   ///  -----------------------------------------------------------------------
                   243   ; gpt2.c    151   ///  Configuration of the GPT2 Core Timer 5:
                   244   ; gpt2.c    152   ///  -----------------------------------------------------------------------
                   245   ; gpt2.c    153   ///  - timer 5 works in timer mode
                   246   ; gpt2.c    154   ///  - prescaler factor is 2
                   247   ; gpt2.c    155   ///  - up/down control bit is reset
                   248   ; gpt2.c    156   ///  - external up/down control is disabled
                   249   ; gpt2.c    157   ///  - timer 5 run bit is reset
                   250   ; gpt2.c    158   ///  - timer 5 remote control is disabled
                   251   ; gpt2.c    159 
                   252   ; gpt2.c    160   GPT12E_T5CON   =  0x0000;      // load timer 5 control register
                   253           ?LINE   160
000A E00C          254           MOV     R12,#00h
000C F6FC46FF      255           MOV     0FF46h,R12
                   256   ; gpt2.c    161   GPT12E_T5      =  0xFFFF;      // load timer 5 register
                   257           ?LINE   161
0010 E6FCFFFF      258           MOV     R12,#0FFFFh
0014 F6FC46FE      259           MOV     0FE46h,R12
                   260   ; gpt2.c    162 
                   261   ; gpt2.c    163   ///  -----------------------------------------------------------------------
                   262   ; gpt2.c    164   ///  Configuration of the GPT2 Core Timer 6:
                   263   ; gpt2.c    165   ///  -----------------------------------------------------------------------
                   264   ; gpt2.c    166   ///  - timer 6 works in timer mode
                   265   ; gpt2.c    167   ///  - prescaler factor is 8
                   266   ; gpt2.c    168   ///  - up/down control bit is reset
                   267   ; gpt2.c    169   ///  - external up/down control is disabled
                   268   ; gpt2.c    170   ///  - alternate output function T6OUT (P6.2) is disabled
                   269   ; gpt2.c    171   ///  - alternate output function T6OUT (P7.0) is disabled
                   270   ; gpt2.c    172   ///  - timer 6 output toggle latch (T6OTL) is set to 0
                   271   ; gpt2.c    173   ///  - timer 6 run bit is reset
                   272   ; gpt2.c    174   ///  - timer 6 is not cleared on a capture
                   273   ; gpt2.c    175 
                   274   ; gpt2.c    176   GPT12E_T6CON   =  0x0802;      // load timer 6 control register
                   275           ?LINE   176
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 28 2021  Time: 15:42:21  Page:   6
gpt2

 LOC CODE        LINE   SOURCELINE

0018 E6FC0208      276           MOV     R12,#0802h
001C F6FC48FF      277           MOV     0FF48h,R12
                   278   ; gpt2.c    177   GPT12E_T6      =  0x0218;      // load timer 6 register
                   279           ?LINE   177
0020 E6FC1802      280           MOV     R12,#0218h
0024 F6FC48FE      281           MOV     0FE48h,R12
                   282   ; gpt2.c    178 
                   283   ; gpt2.c    179   ///  -----------------------------------------------------------------------
                   284   ; gpt2.c    180   ///  Configuration of the GPT2 CAPREL:
                   285   ; gpt2.c    181   ///  -----------------------------------------------------------------------
                   286   ; gpt2.c    182   ///  - capture T5 into CAPREL is disabled
                   287   ; gpt2.c    183   ///  - capture trigger from pin CAPIN
                   288   ; gpt2.c    184   ///  - capure is disabled
                   289   ; gpt2.c    185   ///  - timer 5 is not cleared on a capture
                   290   ; gpt2.c    186   ///  - timer 5 is just captured without any correction
                   291   ; gpt2.c    187 
                   292   ; gpt2.c    188   GPT12E_T5CON  |=  0x0000;      // load timer 5 control register
                   293           ?LINE   188
0028 E6FC46FF      294           MOV     R12,#0FF46h
002C A8CC          295           MOV     R12,[R12]
                   296   ; gpt2.c    189   GPT12E_CAPREL  =  0x0218;      // load CAPREL register
                   297           ?LINE   189
002E E6FC1802      298           MOV     R12,#0218h
0032 F6FC4AFE      299           MOV     0FE4Ah,R12
                   300   ; gpt2.c    190 
                   301   ; gpt2.c    191   ///  -----------------------------------------------------------------------
                   302   ; gpt2.c    192   ///  Configuration of the used GPT2 Port Pins:
                   303   ; gpt2.c    193   ///  -----------------------------------------------------------------------
                   304   ; gpt2.c    194   ///  - P5.3 is used for  GPT12E Timer2 Count input(T3IN)
                   305   ; gpt2.c    195 
                   306   ; gpt2.c    196 
                   307   ; gpt2.c    197   ///  -----------------------------------------------------------------------
                   308   ; gpt2.c    198   ///  Configuration of the used GPT2 Interrupts:
                   309   ; gpt2.c    199   ///  -----------------------------------------------------------------------
                   310   ; gpt2.c    200   ///  timer 6 service request node configuration:
                   311   ; gpt2.c    201   ///  - timer 6 interrupt priority level (ILVL) = 10
                   312   ; gpt2.c    202   ///  - timer 6 interrupt group level (GLVL) = 0
                   313   ; gpt2.c    203   ///  - timer 6 group priority extension (GPX) = 0
                   314   ; gpt2.c    204 
                   315   ; gpt2.c    205   GPT12E_T6IC    =  0x0068;     
                   316           ?LINE   205
0036 E6FC6800      317           MOV     R12,#068h
003A F6FC68FF      318           MOV     0FF68h,R12
                   319   ; gpt2.c    206 
                   320   ; gpt2.c    207 
                   321   ; gpt2.c    208 
                   322   ; gpt2.c    209   // USER CODE BEGIN (GPT2_Function,3)
                   323   ; gpt2.c    210 
                   324   ; gpt2.c    211   // USER CODE END
                   325   ; gpt2.c    212 
                   326   ; gpt2.c    213 } //  End of function GPT2_viCAPREL
                   327           ?LINE   213
003E DB00          328           RETS
                   329   _GPT2_vInit     ENDP
               R   330           ?SYMB   '',$,17,213
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 28 2021  Time: 15:42:21  Page:   7
gpt2

 LOC CODE        LINE   SOURCELINE

                   331   ; gpt2.c    214 
                   332   ; gpt2.c    215 //****************************************************************************
                   333   ; gpt2.c    216 // @Function      void GPT2_viTmr6(void) 
                   334   ; gpt2.c    217 //
                   335   ; gpt2.c    218 //----------------------------------------------------------------------------
                   336   ; gpt2.c    219 // @Description   This is the interrupt service routine for the GPT2 timer 6. 
                   337   ; gpt2.c    220 //                It is called up in the case of over or underflow of the 
                   338   ; gpt2.c    221 //                timer 6 register.
                   339   ; gpt2.c    222 //                
                   340   ; gpt2.c    223 //                Please note that you have to add application specific code 
                   341   ; gpt2.c    224 //                to this function.
                   342   ; gpt2.c    225 //
                   343   ; gpt2.c    226 //----------------------------------------------------------------------------
                   344   ; gpt2.c    227 // @Returnvalue   None
                   345   ; gpt2.c    228 //
                   346   ; gpt2.c    229 //----------------------------------------------------------------------------
                   347   ; gpt2.c    230 // @Parameters    None
                   348   ; gpt2.c    231 //
                   349   ; gpt2.c    232 //----------------------------------------------------------------------------
                   350   ; gpt2.c    233 // @Date          28.09.2021
                   351   ; gpt2.c    234 //
                   352   ; gpt2.c    235 //****************************************************************************
                   353   ; gpt2.c    236 
                   354   ; gpt2.c    237 // USER CODE BEGIN (Tmr6,1)
                   355   ; gpt2.c    238 
                   356   ; gpt2.c    239 // USER CODE END
                   357   ; gpt2.c    240 
                   358   ; gpt2.c    241 _interrupt(T6INT)  void GPT2_viTmr6(void)
                   359   ; gpt2.c    242 {
               R   360           ?SYMB   'GPT2_viTmr6',_GPT2_viTmr6,37,1
                   361           ?SYMB   '',242,8,16
                   362   _GPT2_viTmr6    PROC TASK GPT2_TASK INTNO GPT2_INUM = 024h
                   363           ?LINE   242
                   364           ?SYMB   '',00H,95,0
0040 F6F00000  R   365           MOV     GPT2_RB,R0
0044 C6080000  R   366           SCXT    CP,#GPT2_RB
0048 C6871000      367           SCXT    MDC,#010h
004C EC00          368           PUSH    DPP0
004E E6000000  R   369           MOV     DPP0,#PAG ?BASE_DPP0
0052 CC00          370           NOP
0054 EC02          371           PUSH    DPP2
0056 E6020000  R   372           MOV     DPP2,#PAG ?BASE_DPP2
005A CC00          373           NOP
005C EC06          374           PUSH    MDH
005E EC07          375           PUSH    MDL
0060 ECEF          376           PUSH    MSW
0062 EC2E          377           PUSH    MAL
0064 EC2F          378           PUSH    MAH
0066 ECEE          379           PUSH    MCW
0068 C6ED0000      380           SCXT    MRW,#00h
006C EC84          381           PUSH    IDX0
006E EC85          382           PUSH    IDX1
0070 D180          383           EXTR    #01h
0072 EC00     1    384           PUSH    QX0
0074 D180          385           EXTR    #01h
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 28 2021  Time: 15:42:21  Page:   8
gpt2

 LOC CODE        LINE   SOURCELINE

0076 EC01     1    386           PUSH    QX1
0078 D180          387           EXTR    #01h
007A EC02     1    388           PUSH    QR0
007C D180          389           EXTR    #01h
007E EC03     1    390           PUSH    QR1
                   391   ; Locals:
                   392   ; 
                   393   ; Statics:
                   394   ; 
                   395   ; CSEs:
                   396   ; 
                   397   ; gpt2.c    243   // USER CODE BEGIN (Tmr6,2)
                   398   ; gpt2.c    244          rampIndex++;
                   399           ?LINE   244
0080 F2FC0000  R   400           MOV     R12,_rampIndex
0084 08C1          401           ADD     R12,#01h
0086 F6FC0000  R   402           MOV     _rampIndex,R12
                   403   ; gpt2.c    245          
                   404   ; gpt2.c    246          inc = GPT12E_T4;
                   405           ?LINE   246
008A F2FC44FE      406           MOV     R12,0FE44h
008E F6FC0000  R   407           MOV     _inc,R12
                   408   ; gpt2.c    247          velocity = (1000 * (float) inc)/(8);
                   409           ?LINE   247
0092 F2F40000  R   410           MOV     R4,_inc
0096 DA000000  R   411           CALLS   SEG __cuf24r,__cuf24r
009A E6FA7A44      412           MOV     R10,#0447Ah
009E E00B          413           MOV     R11,#00h
00A0 DA000000  R   414           CALLS   SEG __mlf4r,__mlf4r
00A4 E6FA0041      415           MOV     R10,#04100h
00A8 E00B          416           MOV     R11,#00h
00AA DA000000  R   417           CALLS   SEG __dvf4r,__dvf4r
00AE F6F40000  R   418           MOV     _velocity,R4
00B2 F6F50000  R   419           MOV     (_velocity+2),R5
                   420   ; gpt2.c    248          velocity = velocity/2048;
                   421           ?LINE   248
00B6 F2F40000  R   422           MOV     R4,_velocity
00BA F2F50000  R   423           MOV     R5,(_velocity+2)
00BE E6FA0045      424           MOV     R10,#04500h
00C2 E00B          425           MOV     R11,#00h
00C4 DA000000  R   426           CALLS   SEG __dvf4r,__dvf4r
00C8 F6F40000  R   427           MOV     _velocity,R4
00CC F6F50000  R   428           MOV     (_velocity+2),R5
                   429   ; gpt2.c    249          rpm = velocity * 60;
                   430           ?LINE   249
00D0 F2F40000  R   431           MOV     R4,_velocity
00D4 F2F50000  R   432           MOV     R5,(_velocity+2)
00D8 E6FA7042      433           MOV     R10,#04270h
00DC E00B          434           MOV     R11,#00h
00DE DA000000  R   435           CALLS   SEG __mlf4r,__mlf4r
00E2 F6F40000  R   436           MOV     _rpm,R4
00E6 F6F50000  R   437           MOV     (_rpm+2),R5
                   438   ; gpt2.c    250          GPT12E_T4 = 0;
                   439           ?LINE   250
00EA E00C          440           MOV     R12,#00h
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 28 2021  Time: 15:42:21  Page:   9
gpt2

 LOC CODE        LINE   SOURCELINE

00EC F6FC44FE      441           MOV     0FE44h,R12
                   442   ; gpt2.c    251   // USER CODE END
                   443   ; gpt2.c    252 
                   444   ; gpt2.c    253 } //  End of function GPT2_viTmr6
                   445           ?LINE   253
00F0 D180          446           EXTR    #01h
00F2 FC03     1    447           POP     QR1
00F4 D180          448           EXTR    #01h
00F6 FC02     1    449           POP     QR0
00F8 D180          450           EXTR    #01h
00FA FC01     1    451           POP     QX1
00FC D180          452           EXTR    #01h
00FE FC00     1    453           POP     QX0
0100 FC85          454           POP     IDX1
0102 FC84          455           POP     IDX0
0104 FCED          456           POP     MRW
0106 FCEE          457           POP     MCW
0108 FC2F          458           POP     MAH
010A FC2E          459           POP     MAL
010C FCEF          460           POP     MSW
010E FC07          461           POP     MDL
0110 FC06          462           POP     MDH
0112 FC02          463           POP     DPP2
0114 FC00          464           POP     DPP0
0116 FC87          465           POP     MDC
0118 FC08          466           POP     CP
                   467           ?LINE   253
011A FB88          468           RETI
                   469   _GPT2_viTmr6    ENDP
               R   470           ?SYMB   '',$,17,253
                   471   ; gpt2.c    254 
                   472   ; gpt2.c    255 
                   473   ; gpt2.c    256 
                   474   ; gpt2.c    257 
                   475   ; gpt2.c    258 // USER CODE BEGIN (GPT2_General,10)
                   476   ; gpt2.c    259 
                   477   ; gpt2.c    260 // USER CODE END
                   478   ; gpt2.c    261 
                   479   GPT2_1_PR       ENDS
                   480   
                   481   GPT2_2_NB       SECTION LDAT WORD PUBLIC 'CNEAR'
0000               482   GPT2_2_NB_ENTRY LABEL   BYTE
0000               483   _inc    LABEL   WORD
0000               484           DS      2
                   485           PUBLIC  _inc
               R   486           ?SYMB   'inc',_inc,22,18
                   487   GPT2_2_NB       ENDS
                   488   
                   489   C166_BSS        SECTION PDAT WORD GLOBAL 'CINITROM'
0000 05000000  R   490           DW      05h,GPT2_2_NB_ENTRY,02h
0004 0200        
                   491   C166_BSS        ENDS
                   492   
                   493   $FLOAT(ANSI)
                   494           EXTERN  _rpm:WORD
TASKING C166/ST10 assembler v8.7r1 Build 306                                Date: Sep 28 2021  Time: 15:42:21  Page:  10
gpt2

 LOC CODE        LINE   SOURCELINE

                   495           EXTERN  _velocity:WORD
                   496           EXTERN  _rampIndex:WORD
                   497           EXTERN  __cuf24r:FAR
                   498           EXTERN  __mlf4r:FAR
                   499           EXTERN  __dvf4r:FAR
                   500   GPT2_RB REGDEF  R0-R15
                   501           END

total errors: 0, warnings: 0

